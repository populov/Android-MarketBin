<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Android-MarketBin by populov</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Android-MarketBin</h1>
          <h2>Helps to detect which Android app stores are installed on device, and make links to your applications in those stores.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/populov/Android-MarketBin/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/populov/Android-MarketBin/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/populov/Android-MarketBin" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a name="marketbin" class="anchor" href="#marketbin"><span class="octicon octicon-link"></span></a>MarketBin</h1>

<p>Helps to detect which Android app stores are installed on device, and make links to your applications in those stores.</p>

<p><em>You are welcome with pull requests</em> to add new app stores to <strong>MarketBin</strong>.</p>

<h2>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>Handle "Show In Market" button click</p>

<div class="highlight highlight-java"><pre><span class="n">MarketLocator</span> <span class="n">locator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MarketLocator</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
<span class="n">IMarketDescriptor</span> <span class="n">market</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="na">findFirst</span><span class="o">(</span><span class="n">MarketBin</span><span class="o">.</span><span class="na">getAllKnown</span><span class="o">());</span>
<span class="n">MarketUI</span><span class="o">.</span><span class="na">showAppInMarket</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">market</span><span class="o">,</span> <span class="s">"com.haunted.office.buzz"</span><span class="o">);</span>
</pre></div>

<p>Display clicable link in a TextView</p>

<div class="highlight highlight-java"><pre><span class="n">MarketUI</span><span class="o">.</span><span class="na">bindAppLink</span><span class="o">(</span><span class="n">textView</span><span class="o">,</span> <span class="n">market</span><span class="o">,</span> <span class="s">"com.haunted.office.buzz"</span><span class="o">);</span>
</pre></div>

<p>Get list of Android app store clients installed on device</p>

<div class="highlight highlight-java"><pre><span class="n">MarketLocator</span> <span class="n">locator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MarketLocator</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">IMarketDescriptor</span><span class="o">&gt;</span> <span class="n">availableMarkets</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">MarketBin</span><span class="o">.</span><span class="na">getAllKnown</span><span class="o">(),</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
</pre></div>

<p><strong>Note:</strong> MarketBin doesn't check if your app is available in those stores, only checks if store clients are available on your device. So, if you want to check that a subset of certain markets (where your app is published) is installed on user's device, you can make your own list for verification. The order in this list is significant for search sequence. So it's recommended to place most desirable items in the beginning of list and vice versa. Also I recommend to place at the end of list a "fallback" item, that shows a google play (for example) website in browser, if no available markets detected.</p>

<div class="highlight highlight-java"><pre><span class="n">IMarketDescriptor</span><span class="o">[]</span> <span class="n">myAppPublishedIn</span> <span class="o">=</span> <span class="o">{</span>
    <span class="n">MarketBin</span><span class="o">.</span><span class="na">getGooglePlay</span><span class="o">(),</span>
    <span class="n">MarketBin</span><span class="o">.</span><span class="na">getSamsungApps</span><span class="o">(),</span>
    <span class="n">MarketBin</span><span class="o">.</span><span class="na">getSlideMe</span><span class="o">(),</span>
    <span class="n">MarketBin</span><span class="o">.</span><span class="na">getGooglePlayWeb</span><span class="o">()</span>
<span class="o">};</span>
<span class="n">IMarketDescriptor</span> <span class="n">market</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="na">findFirst</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">myAppPublishedIn</span><span class="o">));</span>
</pre></div>

<h2>
<a name="dynamic-extending" class="anchor" href="#dynamic-extending"><span class="octicon octicon-link"></span></a>Dynamic extending</h2>

<p>You can add your own markets without need to modify library source code. Just create a new MarketDescriptor item With market name, market client package name (if you know it), and template of package location URL (you can find it in store API documentation), where <strong>%s</strong> is a place, where your application id (usually package name) will be placed.</p>

<div class="highlight highlight-java"><pre><span class="n">IMarketDescriptor</span> <span class="n">googlePlay</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MarketDescriptor</span><span class="o">(</span><span class="s">"Google Play"</span><span class="o">,</span> <span class="s">"market://details?id=%s"</span><span class="o">,</span> <span class="s">"com.android.vending"</span><span class="o">);</span>
</pre></div>

<h2>
<a name="odd-use" class="anchor" href="#odd-use"><span class="octicon octicon-link"></span></a>Odd use</h2>

<p>Market locator can be used to check whether some application is installd or some URI scheme handler is present. So, you can, for example, easily check if user has Bitcoin wallet installed and make clicable links for Bitcoin addresses.</p>

<div class="highlight highlight-java"><pre><span class="n">MarketLocator</span> <span class="n">locator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MarketLocator</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
<span class="n">IMarketDescriptor</span> <span class="n">donation</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MarketDescriptor</span><span class="o">(</span><span class="s">"Bitcoin Donation"</span><span class="o">,</span> <span class="s">"bitcoin:%s"</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="kt">boolean</span> <span class="n">bitcoinProtocolHandlerFound</span> <span class="o">=</span> <span class="n">locator</span><span class="o">.</span><span class="na">findByIntent</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">donation</span><span class="o">))</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">bitcoinProtocolHandlerFound</span><span class="o">)</span>
    <span class="n">MarketUI</span><span class="o">.</span><span class="na">bindAppLink</span><span class="o">(</span><span class="n">textView</span><span class="o">,</span> <span class="n">donation</span><span class="o">,</span> <span class="s">"17g6FWQh8iF8C2MAQhoyYAvxtpYXdMbfbd"</span><span class="o">);</span>
</pre></div>

<h2>
<a name="use-in-android-studio" class="anchor" href="#use-in-android-studio"><span class="octicon octicon-link"></span></a>Use in Android Studio</h2>

<h3>
<a name="online-dependency" class="anchor" href="#online-dependency"><span class="octicon octicon-link"></span></a>Online dependency</h3>

<p>The easyest way to use - you don't need to build project yourself, just add a few lines in your <em>gradle.config</em>.</p>

<ol>
<li>
<p>Add Haunted Soft maven repository in project repositories section (<em>don't mix it up with buildscript repositories, that usually goes first</em>).</p>

<div class="highlight highlight-groovy"><pre><span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
    <span class="n">maven</span> <span class="o">{</span> <span class="n">url</span> <span class="s2">"http://dl.bintray.com/haunted-soft/maven"</span> <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</li>
<li>
<p>Add project depencency as usual. You also should add to dependencies JetBrains annotations library, if you still don't use it.</p>

<div class="highlight highlight-groovy"><pre><span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span> <span class="s1">'com.haunted.marketbin:MarketBin:+@aar'</span>
    <span class="n">compile</span> <span class="s1">'org.jetbrains:annotations:+@jar'</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></div>
</li>
</ol><h3>
<a name="local-dependency-build-from-source" class="anchor" href="#local-dependency-build-from-source"><span class="octicon octicon-link"></span></a>Local dependency (build from source)</h3>

<p>If you want to have latest version, that has not been published yet, or build from modified sources, the easyest way is to depend on local Maven repository in your project.</p>

<ol>
<li>
<p>Download sources, build MarketBin project with gradle and execute <strong>uploadArchives</strong> task to publish library in local Maven repository.</p>

<pre lang="shell"><code>git clone git@github.com:Haunted-Soft/MarketBin.git
cd MarketBin
gradle build uploadArchives
</code></pre>
</li>
<li>
<p>Add mavenLocal repository in project repositories section (<em>don't mix it up with buildscript repositories, that usually goes first</em>)</p>

<div class="highlight highlight-groovy"><pre><span class="n">repositories</span> <span class="o">{</span>
    <span class="n">mavenCentral</span><span class="o">()</span>
    <span class="n">mavenLocal</span><span class="o">()</span>
<span class="o">}</span>
</pre></div>
</li>
<li><p>Add project dependency as usual (see above).</p></li>
</ol><h1>
<a name="donations" class="anchor" href="#donations"><span class="octicon octicon-link"></span></a>Donations</h1>

<p>You can donate me some virtual coins, if you like <strong>MarketBin</strong> library and especially if it helps you earn real money :)</p>

<p>Bitcoin: <a>17g6FWQh8iF8C2MAQhoyYAvxtpYXdMbfbd</a></p>

<p>Litecoin: <a>Lcz35NNdPap6X8GVgudVP9nwWxbYMvRgpi</a></p>
        </section>

        <footer>
          Android-MarketBin is maintained by <a href="https://github.com/populov">populov</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>